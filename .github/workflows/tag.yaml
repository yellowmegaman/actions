name: release-deployment
on:
  push:
    tags:
env:
  KUBEVAL_VERSION: v0.16.1
jobs:
  gcs-release:
    name: release
    runs-on: ubuntu-latest
    env:
      GH_TOKEN: ${{secrets.TKN}}
    steps:
      - name: checkout code
        uses: actions/checkout@master
      - name: yamllint
        run:  yamllint --version
      - name: path
        run: echo $PATH
      - name: get kubeval
        run: |
          curl -L -s --create-dirs https://github.com/instrumenta/kubeval/releases/download/$KUBEVAL_VERSION/kubeval-linux-amd64.tar.gz | tar xvz --exclude='LICENSE' --exclude='README.md' -C $GITHUB_WORKSPACE/.local/bin
          chmod +x $GITHUB_WORKSPACE/.local/bin/kubeval
      - name: kubeval
        run: kubeval --version
#      - name: pr-donwstream
#        uses: yellowmegaman/pr-downstream@master
#        with:
#          change: "echo $(date) | tee date.txt && ls"
#          title: "title text"
#          pr_branch: "hello5"
#          target_branch: "master"
#          working_directory: "swisszzzzz"
